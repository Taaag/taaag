<div class="row tagrank">
    <img class="profile-taglist-img" src="https://graph.facebook.com/{{ user.id }}/picture?type=large"></img>
</div>
<div class="row tagrank">

    <div class="profile-taglist">
        <table class="table profile-taglist-table">
            {% for tag in tags %}
                <tr class="my-tag-set">
                    <th class="col-sm-1 th-detele-btn">
                        <div class="mytaglist-delete-btn">x</div>
                    </th>
                    <th class="col-sm-1 th-upvote-num" >
                        <div class="mytag-upvote-circle"><p class="mytag-upvote-num">{{ tag.taggers|length }}</div>
                    </th>
                    <th class="col-sm-5 taglist-th-tn"><p class="mytag-tagname-font">{{ tag.name }}</p></th>
                    <th class="col-sm-4">
                        <!-- 循环照片。。。 -->
                        <div class="mytag-img .th-mytag-img"></div>
                    </th>
                    <th class="col-sm-1 th-mytag-viewmore">
                        <img class="img-viewmore" src="/static/images/manage-more.png"></img>
                    </th>
                </tr>
            {% endfor %}
        </table>
    </div>

</div>

<script>
    $('.mytaglist-delete-btn').click(function () {
        var $row = $(this).closest('.my-tag-set');
        var tag = $row.find('.mytag-tagname-font').text();
        BootstrapDialog.confirm("Add you sure to delete " + tag + "?", function (result) {
            if (result) {
                deleteTag(tag, $row);
            }
        });
    });

    function deleteTag(tag, $row) {
        $.get('/api/delete_tag', {name: tag}, function (response) {
            if (response['succeed']) {
                $.bootstrapGrowl("Successfully removed " + tag, {align: 'center', 'type': 'success'});
                $row.remove();
            } else {
                $.bootstrapGrowl("Oops, " + response['message'], {align: 'center', 'type': 'warning'});
            }
        });
    }
</script>
