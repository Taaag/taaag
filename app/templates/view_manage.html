<div class="row tagrank">
    <img class="profile-taglist-img" src="https://graph.facebook.com/{{ user.id }}/picture?type=large"></img>
</div>
<div class="row tagrank">

    <div class="profile-taglist">
        <table class="table profile-taglist-table">
            {% for tag in tags %}
                <tr class="my-tag-set">
                    <th class="col-sm-1 th-detele-btn">
                        <div class="mytaglist-delete-btn">x</div>
                    </th>
                    <th class="col-sm-1 th-upvote-num">
                        <div class="mytag-upvote-circle"><p class="mytag-upvote-num">{{ tag.taggers|length }}</div>
                    </th>
                    <th class="col-sm-5 taglist-th-tn"><p class="mytag-tagname-font">{{ tag.name }}</p></th>
                    <th class="col-sm-4">
                        <!-- 循环照片。。。 -->
                        {% for tagger in tag.taggers %}
                            <div class="mytag-img .th-mytag-img">
                                <img class="voter-img" src="https://graph.facebook.com/{{ tagger.id }}/picture">
                            </div>
                        {% endfor %}
{#                        <div class="mytag-img .th-mytag-img"></div>#}
                    </th>
                    <th class="col-sm-1 th-mytag-viewmore">
                        <img class="img-viewmore" src="/static/images/manage-more.png"></img>
                    </th>
                    <th class="col-sm-1 th-mytag-scroll">

                    </th>
                </tr>
            {% endfor %}
        </table>
    </div>

    <div id="dialog" title="Basic dialog">
    <p>This is an animated dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.</p>
    </div>

</div>

<script>
    $('.mytaglist-delete-btn').click(function () {
        var $row = $(this).closest('.my-tag-set');
        var tag = $row.find('.mytag-tagname-font').text();
        BootstrapDialog.confirm("Add you sure to delete " + tag + "?", function (result) {
            if (result) {
                deleteTag(tag, $row);
            }
        });
    });

    function deleteTag(tag, $row) {
        $.get('/api/delete_tag', {name: tag}, function (response) {
            if (response['succeed']) {
                $.bootstrapGrowl("Successfully removed " + tag, {align: 'center', 'type': 'success'});
                $row.remove();
            } else {
                $.bootstrapGrowl("Oops, " + response['message'], {align: 'center', 'type': 'warning'});
            }
        });
    }


  $(function() {
    $( "#dialog" ).dialog({
      autoOpen: false,
      show: {
        effect: "blind",
        duration: 1000
      },
      hide: {
        effect: "explode",
        duration: 1000
      }
    });
 
    $( ".img-viewmore" ).click(function() {
      $( "#dialog" ).dialog( "open" );
    });
  });
  


</script>
